<%- include('partials/head') %>
<%- include('partials/header') %>

<main class="testimonio-page">
    <section class="testimonio-container">
        <h1>Comparte tu experiencia</h1>
        <p>¡Cuéntanos cómo fue tu experiencia con nuestros servicios eléctricos!</p>

        <% if (typeof mensajeExito !== 'undefined' && mensajeExito) { %>
            <div class="alert alert-success">
                <%= mensajeExito %>
            </div>
        <% } %>

        <% if (typeof errores !== 'undefined' && errores.length > 0) { %>
            <div class="alert alert-error">
                <ul>
                    <% errores.forEach(error => { %>
                        <li><%= error %></li>
                    <% }) %>
                </ul>
            </div>
        <% } %>

        <form action="/enviar-testimonio" method="post" class="testimonio-form">
            <div class="form-group">
                <label for="nombre">Nombre completo</label>
                <input
                    type="text"
                    id="nombre"
                    name="nombre"
                    placeholder="Ej: Juan Pérez"
                    value="<%= typeof datos !== 'undefined' ? datos.nombre : '' %>"
                    required
                >
            </div>

            <div class="form-group">
                <label for="email">Correo electrónico</label>
                <input
                    type="email"
                    id="email"
                    name="email"
                    placeholder="ejemplo@correo.com"
                    value="<%= typeof datos !== 'undefined' ? datos.email : '' %>"
                    required
                >
            </div>

            <div class="form-group">
                <label for="servicio">Servicio contratado</label>
                <select name="servicio" id="servicio" required>
                    <option value="" disabled selected>Selecciona un servicio</option>
                    <option value="instalacion">Instalación eléctrica</option>
                    <option value="reparacion">Reparación</option>
                    <option value="solar">Energía solar</option>
                    <option value="iluminacion">Iluminación</option>
                    <option value="cargador">Cargador VE</option>
                    <option value="proteccion">Sistema de protecciones</option>
                    <option value="otro">Otro</option>
                </select>
            </div>

            <div class="form-group">
                <label for="calificacion">Calificación</label>
                <div class="rating-input">
                    <input type="radio" name="calificacion" id="star5" value="5" required>
                    <label for="star5" title="5 estrellas">★</label>
                    <input type="radio" name="calificacion" id="star4" value="4">
                    <label for="star4" title="4 estrellas">★</label>
                    <input type="radio" name="calificacion" id="star3" value="3">
                    <label for="star3" title="3 estrellas">★</label>
                    <input type="radio" name="calificacion" id="star2" value="2">
                    <label for="star2" title="2 estrellas">★</label>
                    <input type="radio" name="calificacion" id="star1" value="1">
                    <label for="star1" title="1 estrella">★</label>
                </div>
            </div>

            <div class="form-group">
                <label for="mensaje">Tu testimonio</label>
                <textarea
                    id="mensaje"
                    name="mensaje"
                    rows="6"
                    placeholder="Comparte tu experiencia con nuestros servicios..."
                    required
                ><%= typeof datos !== 'undefined' ? datos.mensaje : '' %></textarea>
            </div>

            <div class="form-group checkbox">
                <input
                    type="checkbox"
                    id="consentimiento"
                    name="consentimiento"
                    required
                    <%= typeof datos !== 'undefined' && datos.consentimiento ? 'checked' : '' %>
                >
                <label for="consentimiento">
                    Acepto que mi testimonio sea publicado en el sitio web
                </label>
            </div>

            <div class="form-group checkbox">
                <input
                    type="checkbox"
                    id="privacidad"
                    name="privacidad"
                    required
                    <%= typeof datos !== 'undefined' && datos.privacidad ? 'checked' : '' %>
                >
                <label for="privacidad">
                    Acepto la <a href="/politica">política de privacidad</a>
                </label>
            </div>

            <button type="submit" class="btn-submit">
                <i class="fas fa-paper-plane"></i> Enviar testimonio
            </button>
        </form>
    </section>
</main>


<%- include('partials/footer') %>